<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>jQuery UI Selectmenu - Product Selection</title>

  <!-- D3 -->
  <script src="http://d3js.org/d3.v3.js"></script>

  <!-- JQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  
  <!-- JQuery UI -->
  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>

  <!-- My styling -->
  <style  type="text/css" src="style/style.css"></style>
  <link rel="stylesheet" type="text/css" href="style/style.css">

</head>
<body>

<h1> NBA data vis </h1>

<div class="demo">
  <form action="#">
    <fieldset>
      
      <div class="dropdown">
      <select name="team" id="team">
        <option value="" disabled selected>Team</option>
        <option value="">All</option>
      </select>
      </div>
      
      <div class="dropdown">
      <select name="season" id="season">
        <option value="" disabled selected>Season</option>
        <option value="">All</option>
      </select>
      </div>
      
      <div class="dropdown">
      <select name="player" id="player">
        <option value="" disabled selected>Player</option>
        <option value="">All</option>
        <!-- all other players will be loaded here dynamically -->
      </select>
      </div>
      
      <div class="dropdown">
      <select name="eventType" id="eventType">
        <option value="" disabled selected>Event Type</option>
        <option value="">All</option>
        <option value="Shot">Shot</option>
        <option value="Steal">Steal</option>
        <option value="Rebound">Rebound</option>
        <option value="Block">Block</option>
        <option value="Assist">Assist</option>
        <option value="Turnover">Turnover</option>
        <option value="Checkin">Check in</option>
        <option value="Checkout">Check out</option>
      </select>
      </div>

      <div class="dropdown">
      <button id="individualSummary" value="+ indiv">+ indiv</button>
      </div> 

      <div class="dropdown">
      <button id="groupedSummary" value="+ grouped">+ grouped</button>
      </div>

    </fieldset>
  </form>
  <div id="plots"></div>
</div>

<div id="existing"></div>

</body>

<script src="js/urls.js"></script>
<script src="js/plot.js"></script>
<script src="js/ui_callbacks.js"></script>

<script>

filters = [
    "{\"player\":\"James\"}",
    "{\"player\":\"Wade\"}",
    "{\"player\":\"Bosh\"}",
];
for (var i in filters)
{
    nbadvPlotter.addPlotToBodyURL(
        "plot from URL \"" + filters[i]+ "\"", 
        nbadvURLs.gameSummaryURL + filters[i],
        nbadvPlotter.addPlotToBody);
}

var stringSort = function(data, getKey) {
    sortedData = data.sort(function(lhs,rhs){
        lhss = getKey(lhs).replace(/\W/g, '').toLowerCase();
        rhss = getKey(rhs).replace(/\W/g, '').toLowerCase();
        return lhss.localeCompare(rhss);
    });
    return sortedData;
}

$.getJSON(nbadvURLs.playersURL, function( data ) {
    console.log("player");
    sortedData = stringSort(data, function(d) {return d.fullName; });
    $.each(data, function(i, item) {
        var option = $('<option/>');
        option.attr({ 'value': item['name'] }).text(item['fullName']);
        $('#player').append(option);
    });
});

$.getJSON(nbadvURLs.teamsURL, function( data ) {
    console.log("team");
    sortedData = stringSort(data, function(d) {return d.name; });
    $.each(data, function(i, item) {
        var option = $('<option/>');
        option.attr({ 'value': item['name'] }).text(item['name']);
        $('#team').append(option);
    });
});

$.getJSON(nbadvURLs.seasonsURL, function( data ) {
    console.log("season");
    sortedData = stringSort(data, function(d) {return d.name; });
    $.each(data, function(i, item) {
        var option = $('<option/>');
        option.attr({ 'value': item['name'] }).text(item['name']);
        $('#season').append(option);
    });
});

</script>

</html>

